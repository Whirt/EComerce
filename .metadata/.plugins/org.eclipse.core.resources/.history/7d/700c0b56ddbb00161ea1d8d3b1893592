/**
 * LoginFrame handles E-Commerce and decides whether to sign in as administrator
 * or normal user. It's possible to create account.
 * @author Hu Jia Cheng
 * @revision 1.0
 */

package login;

import java.awt.FlowLayout;
import java.awt.Graphics;
import java.awt.Image;
import java.awt.MediaTracker;
import java.awt.Toolkit;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.File;

import javax.swing.BoxLayout;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;

public class LoginFrame extends JFrame implements ActionListener {
	
	private static final int START_X = 200 ;
	private static final int START_Y = 300 ;
	private static final int WIDTH = 350 ;
	private static final int HEIGHT = 400 ;

	private JPanel logoPanel ;
	private Image logo ;
	
	private JPanel componentsPanel ;
	private JLabel nameLabel ;
	private JLabel passwdLabel ;
	private final static int TXTMAXLEN = 20 ;
	private JTextField nameField ;
	private JTextField passwdField ;
	private JTextField errorField ;
	private JButton loginButton ;
	private JButton createNewAccountButton ; 

	private JPanel panel ;
	private BoxLayout layout ;
	
	public LoginFrame(String title) {
		super(title) ;
		setBounds(START_X, START_Y, WIDTH, HEIGHT) ;
		setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE) ;
		//setResizable(false) ;
		
		logoPanel = new JPanel() {
			// anonymous class
			public void paint(Graphics g) {
				super.paint(g) ;
				
				Toolkit t = Toolkit.getDefaultToolkit() ;
				if (!(new File("./media/logo.jpg").exists())) {
					System.out.println("Logo file path error") ;
					System.exit(-1) ;
				}
				logo = t.getImage("/media/logo.jpg") ;
				MediaTracker m = new MediaTracker(this) ;
				m.addImage(logo, 1) ;
				try { m.waitForAll(); 
				} catch (InterruptedException e) {
					System.out.println("Logo not loaded") ;
				}
				
				g.drawImage(logo, 20, 30, null) ;
			}
		} ;
		
		nameLabel = new JLabel("Name ") ;
		passwdLabel = new JLabel("Password ") ;
		nameField = new JTextField("", TXTMAXLEN) ;
		nameField.setEditable(true) ;
		passwdField = new JTextField("", TXTMAXLEN) ;
		passwdField.setEditable(true) ;
		errorField = new JTextField("Error check the password or username") ;
		errorField.setEditable(false) ;
		errorField.setVisible(false) ;
		
		loginButton = new JButton("Login") ;
		loginButton.addActionListener(this) ;
		createNewAccountButton = new JButton("Create new account") ;
		createNewAccountButton.addActionListener(this) ;
		
		FlowLayout l = new FlowLayout(FlowLayout.TRAILING) ;
		componentsPanel = new JPanel() ;
		componentsPanel.setLayout(l) ;
		componentsPanel.add(nameLabel) ; 
		componentsPanel.add(nameField) ;
		componentsPanel.add(passwdLabel) ; 
		componentsPanel.add(passwdField) ;
		componentsPanel.add(errorField) ;
		componentsPanel.add(loginButton) ; 
		componentsPanel.add(createNewAccountButton) ;
		
		//layout = new BoxLayout(panel, BoxLayout.Y_AXIS) ;
		panel = new JPanel() ;
		panel.add(logoPanel) ;
		//panel.add(componentsPanel) ;
		
		add(panel) ;
	}
	public LoginFrame() { this("Login") ; }

	@Override
	public void actionPerformed(ActionEvent e) {
		
		
	}
	
}
